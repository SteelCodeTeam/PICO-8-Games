p,b,e,pa,t={},{},{},{},0 function _init()p={x=64,y=110,a=.25}b,e,pa={},{},{}s,l,g,i=0,3,0,0 end function _update()if g>0 then if btnp(4)then _init()end return end if btn(1)and p.a>=0 then p.a-=.01 end if btn(0)and p.a<=.5 then p.a+=.01 end if t>5 and btnp(5)then t=0 add(b,{x=p.x+cos(p.a)*11,y=p.y+sin(p.a)*11,dx=cos(p.a)*3,dy=sin(p.a)*3})else t+=1 end for bu in all(b)do bu.x+=bu.dx bu.y+=bu.dy if bu.x<0 or bu.x>128 or bu.y<0 or bu.y>128 then del(b,bu)end end r=rnd(100)gd=r<25 and p.x+cos(p.a)*11 or r<55 and p.x+cos(p.a)*11+rnd(40)-20 or rnd(128)gd=max(5,min(123,gd))for en in all(e)do en.y+=en.sp if abs(en.tx-en.x)>1 then en.x+=(en.tx-en.x>0 and en.sp*.5 or -en.sp*.5)end if en.y>128 then del(e,en)add(e,{x=rnd(128),y=0,tx=gd,sp=.25+rnd(.3)})end end for pt in all(pa)do pt.x+=pt.dx pt.y+=pt.dy pt.life-=1 if pt.life<=0 then del(pa,pt)end end if rnd(100)<max(1,(1+flr(s/100))*.4)then add(e,{x=rnd(128),y=0,tx=gd,sp=.2+rnd(.25)})end for bu in all(b)do for en in all(e)do if abs(bu.x-en.x)<3 and abs(bu.y-en.y)<3 then for j=1,40 do add(pa,{x=en.x,y=en.y,dx=rnd(3)-1.5,dy=rnd(3)-1.5,life=15+rnd(10),color=8+rnd(3)})end del(b,bu)del(e,en)s+=10 break end end end if i<=0 then for en in all(e)do if abs(en.x-p.x)<8 and abs(en.y-p.y)<8 then for j=1,40 do add(pa,{x=p.x,y=p.y,dx=rnd(3)-1.5,dy=rnd(3)-1.5,life=15+rnd(10),color=8+rnd(3)})end del(e,en)l-=1 i=90 if l<=0 then g=1 end break end end end if i>0 then i-=1 end end function _draw()cls(1)if g>0 then cls(0)print("you lose",45,60,8)print("s:"..s.." z restart",35,70,7)return end rectfill(0,110,128,128,3)for j=0,128,8 do y=30+sin(j/20)*15 rectfill(j,y,j+8,110,13)rectfill(j,y,j+8,y+5,5)end oval(p.x-6,p.y-6,p.x+6,p.y+6,i>0 and i%10<5 and 7 or 12)for j=1,30 do px=p.x+cos(p.a)*(11+6*j)py=p.y+sin(p.a)*(11+6*j)if px>=0 and px<=128 and py>=0 and py<=128 then if j%3==0 then pset(px,py,15)end else break end end line(p.x,p.y,p.x+cos(p.a)*11,p.y+sin(p.a)*11,7)circfill(p.x,p.y,5,6)circfill(p.x,p.y,3,12)for bu in all(b)do circfill(bu.x,bu.y,1,10)end for en in all(e)do circfill(en.x,en.y,2,8)circfill(en.x,en.y,1,14)end for pt in all(pa)do pset(pt.x,pt.y,pt.color)end print("s:"..s,2,2,7)print("⬅️➡️:move",2,122,6)print("❎:shoot",70,122,6)for j=1,l do circfill(128-j*8,5,2,12)end end
